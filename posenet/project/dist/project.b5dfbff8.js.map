{"version":3,"sources":["project.js"],"names":["startScreen","document","getElementById","endScreen","messageArea","message","videoArea","topScore","localStorage","getItem","game_started_here","waitingForJump","bgImg","require","bg","Image","src","playerSource","playerSprite","anvilSource","anvilSprite","diamondSource","diamondSprite","startGame","game_started","setInterval","checkIfPersonDetected","person_detected","innerHTML","calibrated","stack_jumps","length","jump","pop","game","style","display","top","isJumping","jumpUp","arrayOfAnvils","score","anvilAdded","canvas","ctx","getContext","width","screen","height","mySprite","x","y","speed","jumpSpeed","draw","drawImage","anvil","constructor","Math","floor","random","push","diamond","line","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","paintCanvas","fillStyle","fillRect","background","createPattern","rect","fill","fallingObjects","myAnvil","update","mod","stack_actions","pos","updateScore","font","textAlign","textBaseline","fillText","render","clearInterval","collision","setTimeout","location","reload","setItem","run","started","console","timeEnd","time"],"mappings":"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","file":"project.b5dfbff8.js","sourceRoot":"..","sourcesContent":["//Variable Declaration\r\nvar startScreen = document.getElementById(\"startGame\");\r\nvar endScreen = document.getElementById(\"endGame\");\r\nvar messageArea = document.getElementById(\"header\");\r\nvar message = document.getElementById(\"message\");\r\nvar videoArea = document.getElementById(\"videoArea\");\r\nvar topScore = localStorage.getItem(\"currentTopScore\");\r\nvar game_started_here = false;\r\nvar waitingForJump = false;\r\n\r\n//Background image\r\nconst bgImg = require('./minecraft_river_side.jpg') ;\r\nvar bg = new Image();\r\nbg.src = bgImg;\r\n\r\n//Declaring player sprite\r\nconst playerSource = require('./steve.png');\r\nvar playerSprite = new Image();\r\nplayerSprite.src = playerSource;\r\n\r\n//Declaring anvil sprite\r\nconst anvilSource = require('./anvilImage.png');\r\nvar anvilSprite = new Image();\r\nanvilSprite.src = anvilSource;\r\n\r\n//Declaring diamond sprite\r\nconst diamondSource = require('./diamondImage.png');\r\nvar diamondSprite = new Image();\r\ndiamondSprite.src = diamondSource;\r\n\r\nstartGame()\r\n\r\nfunction startGame(){\r\n\tgame_started = false; //Check if there is already a game started\r\n\tsetInterval(checkIfPersonDetected, 1000); //Check for a person every second (=1000ms)\r\n}\r\n\r\nfunction checkIfPersonDetected(){\r\n\tif(person_detected && !game_started){\r\n\t\tmessage.innerHTML = \"Detected person. Calibrating, please don't move.\"\r\n\r\n\t\tif(calibrated && !waitingForJump){\r\n\t\t\twaitingForJump = true;\r\n\t\t}\r\n\t}\r\n\r\n\tif(!person_detected){\r\n\t\twaitingForJump = false;\r\n\t\tmessage.innerHTML = \"Waiting to detect person...\"\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(!game_started_here && game_started){\r\n\t\tmessage.innerHTML = \"Calibrated! Jump to start.\";\r\n\t\tif(stack_jumps.length > 0){\r\n\t\t\tvar jump = stack_jumps.pop();\r\n\t\t\tstack_jumps = [];\r\n\t\t\tif(jump){\r\n\t\t\t\tgame();\r\n\t\t\t\tgame_started_here = true;\r\n\t\t\t\tmessageArea.style.display = \"none\";\r\n\t\t\t\tvideoArea.style.top = \"50%\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//Game loop\r\nfunction game()\r\n{\r\n\tvar isJumping = false;\r\n\tvar jumpUp = true;\r\n\tvar arrayOfAnvils = [];\r\n\tvar score = 0;\r\n\tvar anvilAdded = false;\r\n\r\n\tstartScreen.style.display = \"none\";\r\n\tendScreen.style.display = \"none\";\r\n\t\r\n\t//Defining canvas\r\n\tvar canvas = document.getElementById(\"canvas\");\r\n\tvar ctx = canvas.getContext(\"2d\");\r\n\tcanvas.width = screen.width/3;\r\n\tcanvas.height = screen.height-200;\r\n\tcanvas.style.display = \"block\";\r\n\t\r\n\t//Declaring player\r\n\tvar mySprite = {\r\n\t\tx: 0,\r\n\t\ty: canvas.height-120,\r\n\t\twidth: 54,\r\n\t\theight: 120,\r\n\t\tspeed: 200,\r\n\t\tjumpSpeed: 2,\r\n\r\n\t\tdraw: function(){\r\n\t\t\tctx.drawImage(playerSprite, this.x, this.y, this.width, this.height);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t//Declaring anvil\r\n\tclass anvil{\r\n\t\tconstructor(){\r\n\t\t\tthis.width = 77;\r\n\t\t\tthis.height = 48;\r\n\t\t\tthis.x = Math.floor((Math.random() * (canvas.width - 77)));\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.speed = 2.5;\r\n\t\t}\r\n\r\n\t\tdraw(){\r\n\t\t\tctx.drawImage(anvilSprite, this.x, this.y, this.width, this.height);\r\n\t\t}\r\n\t}\r\n\tarrayOfAnvils.push(new anvil());\r\n\r\n\t//Declaring diamond\r\n\tvar diamond = {\r\n\t\twidth: 41,\r\n\t\theight: 41,\r\n\t\tx: Math.floor(Math.random() * (canvas.width - 41)),\r\n\t\ty: canvas.height - mySprite.height - 90,\r\n\t\t//Diamonds spawn a bit higher than the y value of the player when they jump\r\n\r\n\t\tdraw: function(){\r\n\t\t\tctx.drawImage(diamondSprite, this.x, this.y, this.width, this.height);\r\n\t\t}\r\n\t}\r\n\r\n\t//Declaring line which separates score from game\r\n\tvar line = {\r\n\t\tdraw: function()\r\n\t\t{\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(0, 35);\r\n\t\t\tctx.lineTo(canvas.width, 35);\r\n\t\t\tctx.lineWidth = 5;\r\n\t\t\tctx.strokeStyle = \"#ffffff\";\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\t};\r\n\r\n\t//Function to draw canvas\r\n\tfunction paintCanvas()\r\n\t{\r\n\t\tctx.fillStyle = bg;\r\n\t\tctx.fillRect(0,0,canvas.width,canvas.height);\r\n\r\n\t\tvar background = ctx.createPattern(bg, \"no-repeat\");\r\n\t\tctx.rect(0, 0, canvas.width, canvas.height);\r\n\t\tctx.fillStyle = background;\r\n\t\tctx.fill();\r\n\t}\r\n\r\n\t//Function to draw the falling anvils\r\n\tfunction fallingObjects()\r\n\t{\r\n\t\tfor(myAnvil in arrayOfAnvils){\r\n\t\t\tarrayOfAnvils[myAnvil].draw();\r\n\t\t}\r\n\t}\r\n\r\n\t//Function to get input from web-cam\r\n\tfunction update(mod)\r\n\t{\r\n\t\t//changes x-position of player character\r\n\t\tif(stack_actions.length > 0){\r\n\t\t\tvar pos = stack_actions.pop();\r\n\t\t\tstack_actions = [];\r\n\t\t\tmySprite.x = pos*(canvas.width-54)\r\n\t\t}\r\n\r\n\t\t//checks whether player is jumping\r\n\t\tif(stack_jumps.length > 0){\r\n\t\t\tvar jump = stack_jumps.pop();\r\n\t\t\tstack_jumps = [];\r\n\t\t\tif(jump){\r\n\t\t\t\tisJumping = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//depending on if the player is jumping, the player character will be moved accordingly\r\n\t\tif(isJumping){\r\n\t\t\tif(jumpUp){\r\n\t\t\t\tmySprite.y -= mySprite.jumpSpeed;\r\n\t\t\t\tif(mySprite.y < canvas.height-190){\r\n\t\t\t\t\tjumpUp = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tmySprite.y += mySprite.jumpSpeed;\r\n\t\t\t\tif(mySprite.y >= canvas.height-120){\r\n\t\t\t\t\tisJumping = false;\r\n\t\t\t\t\tjumpUp = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//Function to show score \r\n\tfunction updateScore()\r\n\t{\r\n\t\tctx.fillStyle = \"white\";\r\n\t\tctx.font = \"16px Arial, sans-serif\";\r\n\t\tctx.textAlign = \"left\";\r\n\t\tctx.textBaseline = \"top\";\r\n\t\tctx.fillText(\"Score: \" + score, 10, 10 );\r\n\r\n\t\tline.draw();\r\n\t}\r\n\r\n\t//Main function to draw the canvas and every element in it\r\n\tfunction render()\r\n\t{\r\n\t\tpaintCanvas();\r\n\t\tmySprite.draw();\r\n\t\tupdateScore();\r\n\r\n\t\t//Anvils\r\n\t\tfor (myAnvil in arrayOfAnvils){\r\n\t\t\tfallingObjects();\r\n\t\t\t//Repeat the object when it falls out of view\r\n\t\t\tif (arrayOfAnvils[myAnvil].y > canvas.height){\r\n\t\t\t\tarrayOfAnvils[myAnvil].y = arrayOfAnvils[myAnvil].height; //Account for the image size\r\n\t\t\t\tarrayOfAnvils[myAnvil].x = Math.floor((Math.random() * (canvas.width - 77)));; //Make it appear randomly along the width  \r\n\t\t\t}\r\n\r\n\t\t\t//Anvil colision detection\r\n\t\t\tif (arrayOfAnvils[myAnvil].x < mySprite.x + mySprite.width && arrayOfAnvils[myAnvil].x + arrayOfAnvils[myAnvil].width > mySprite.x && arrayOfAnvils[myAnvil].y < mySprite.y + mySprite.height && arrayOfAnvils[myAnvil].y + arrayOfAnvils[myAnvil].height > mySprite.y){\r\n\t\t\t\tclearInterval(collision);\r\n\t\t\t\tendScreen.style.display = \"block\";\r\n\t\t\t\tendScreen.innerHTML = \"GAME OVER\" + \"<br>You scored \" + score + \" point(s)!<br>A new game will start shortly...\"\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tlocation.reload();\r\n\t\t\t\t}, 5000);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//Diamonds\r\n\t\tdiamond.draw()\r\n\r\n\t\tif (diamond.x < mySprite.x + mySprite.width && diamond.x + diamond.width > mySprite.x && diamond.y < mySprite.y + mySprite.height && diamond.y + diamond.height > mySprite.y){\r\n\t\t\tscore += 1;\r\n\t\t\tif(score > topScore){\r\n\t\t\t\tlocalStorage.setItem(\"currentTopScore\", score);\r\n\t\t\t}\r\n\t\t\tif((score == 2 || score == 10 || score == 20 || score == 45) && !anvilAdded){\r\n\t\t\t\tanvilAdded = true;\r\n\t\t\t\tarrayOfAnvils.push(new anvil);\r\n\t\t\t}\r\n\t\t\tanvilAdded = false;\r\n\t\t\tdiamond.x = canvas.width + 82;\r\n\t\t\tsetTimeout(function(){ \r\n\t\t\t\tdiamond.x = Math.floor(Math.random() * (canvas.width - 41));\r\n\t\t\t}, 5000);\r\n\t\t\tfor (myAnvil in arrayOfAnvils){\r\n\t\t\t\t//Check if smaller than max speed, if not increase speed by 0.1\r\n\t\t\t\tif(arrayOfAnvils[myAnvil].speed < 5){\r\n\t\t\t\t\tarrayOfAnvils[myAnvil].speed += 0.1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction run()\r\n\t{\r\n\t\tif(started){\r\n\t\t\tconsole.timeEnd(\"1\")\r\n\t\t}\r\n\t\telse{\r\n\t\t\tstarted = true;\r\n\t\t\tconsole.time(\"1\")\r\n\t\t}\r\n\t\tupdate();\r\n\t\tfor (myAnvil in arrayOfAnvils){\r\n\t\t\tarrayOfAnvils[myAnvil].y += arrayOfAnvils[myAnvil].speed ;\r\n\t\t}\r\n\t\trender();\r\n\t}\r\n\t\r\n\tvar started = false;\r\n\tvar collision = setInterval(run, 10);\r\n}\r\n"]}