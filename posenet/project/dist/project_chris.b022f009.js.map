{"version":3,"sources":["project_chris.js"],"names":["id","document","getElementById","innerHTML","playerSource","require","playerSprite","Image","src","game_started","setInterval","checkIfPersonDetected","person_detected","calibrated","game","id1","style","display","canvas","ctx","getContext","width","screen","height","already_touched","playsound","endsound","count","touchright","touchleft","mySprite","x","y","speed","draw","drawImage","anvil","Math","floor","random","beginPath","anvilSprite","URL","fillStyle","c","self","fill","line","moveTo","lineTo","lineWidth","strokeStyle","stroke","paintCanvas","fillRect","player","fallingObjects","keysDown","keysUp","window","addEventListener","e","keyCode","update","mod","stack_actions","length","pos","pop","stack_jumps","jump","alert1","updateScore","update1","index","hasOwnProperty","font","textAlign","textBaseline","fillText","render","play","pause","clearInterval","collision","run"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA,IAAIA,EAAE,GAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAT;AACAF,EAAE,CAACG,SAAH,GAAe,gCAAgC,OAAhC,GAA0C,6BAAzD;;AAEA,MAAMC,YAAY,GAAGC,OAAO,CAAC,aAAD,CAA5B;;AACA,IAAIC,YAAY,GAAG,IAAIC,KAAJ,EAAnB;AACAD,YAAY,CAACE,GAAb,GAAmBJ,YAAnB;AACA,IAAIK,YAAY,GAAG,KAAnB,EAA0B;;AAC1BC,WAAW,CAACC,qBAAD,EAAwB,IAAxB,CAAX,EAA0C;;AAE1C,SAASA,qBAAT,GACA;AACC,MAAGC,eAAe,IAAI,CAACH,YAAvB,EAAoC;AACnCA,IAAAA,YAAY,GAAG,IAAf;AACAT,IAAAA,EAAE,CAACG,SAAH,GAAe,gCAAgC,OAAhC,GAA0C,oDAAzD;AAEAO,IAAAA,WAAW,CAAC,MACZ;AACC,UAAG,CAACE,eAAJ,EAAoB;AACnBZ,QAAAA,EAAE,CAACG,SAAH,GAAe,gCAAgC,OAAhC,GAA0C,6BAAzD;AACA;AACA;;AACD,UAAGU,UAAH,EAAc;AACbb,QAAAA,EAAE,CAACG,SAAH,GAAe,6BAAf,CADa,CAEb;;AACCW,QAAAA,IAAI;AACL;AACD,KAXU,EAWR,IAXQ,CAAX,CAJmC,CAezB;AAEV;AACD,EACD;;;AACA,SAASA,IAAT,GACA;AACC;AACA,MAAIC,GAAG,GAAGd,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAV;AAEAF,EAAAA,EAAE,CAACgB,KAAH,CAASC,OAAT,GAAmB,MAAnB;AACAF,EAAAA,GAAG,CAACC,KAAJ,CAAUC,OAAV,GAAoB,MAApB,CALD,CAOC;;AACA,MAAIC,MAAM,GAAGjB,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAb;AACA,MAAIiB,GAAG,GAAGD,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAV;AACAF,EAAAA,MAAM,CAACG,KAAP,GAAeC,MAAM,CAACD,KAAP,GAAa,CAA5B;AACAH,EAAAA,MAAM,CAACK,MAAP,GAAgBD,MAAM,CAACC,MAAP,GAAc,GAA9B,CAXD,CAYC;AAEA;;AACA,MAAIC,eAAe,GAAG,IAAtB;AAEA,MAAIC,SAAS,GAAGxB,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAhB;AACA,MAAIwB,QAAQ,GAAGzB,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAf;AACA,MAAIyB,KAAK,GAAG,CAAZ;AACA,MAAIC,UAAU,GAAG,KAAjB;AACA,MAAIC,SAAS,GAAG,IAAhB,CArBD,CAuBC;;AACA,MAAIC,QAAQ,GAAG;AACdC,IAAAA,CAAC,EAAE,CADW;AAEdC,IAAAA,CAAC,EAAEd,MAAM,CAACK,MAAP,GAAc,GAFH;AAGdF,IAAAA,KAAK,EAAE,EAHO;AAIdE,IAAAA,MAAM,EAAE,GAJM;AAKdU,IAAAA,KAAK,EAAE,GALO;AAOdC,IAAAA,IAAI,EAAE,YAAU;AACff,MAAAA,GAAG,CAACgB,SAAJ,CAAc7B,YAAd,EAA4B,KAAKyB,CAAjC,EAAoC,KAAKC,CAAzC,EAA4C,KAAKX,KAAjD,EAAwD,KAAKE,MAA7D;AACA;AATa,GAAf,CAxBD,CAqCC;;AACA,MAAIa,KAAK,GAAG;AACVL,IAAAA,CAAC,EAAEM,IAAI,CAACC,KAAL,CAAW,IAAKpB,MAAM,CAACG,KAAR,GAAegB,IAAI,CAACE,MAAL,EAA9B,CADO;AAEVP,IAAAA,CAAC,EAAEd,MAAM,CAACK,MAFA;AAGVF,IAAAA,KAAK,EAAE,EAHG;AAIVE,IAAAA,MAAM,EAAE,EAJE;AAKVU,IAAAA,KAAK,EAAE,GALG;AAOVC,IAAAA,IAAI,EAAE,YACN;AACCf,MAAAA,GAAG,CAACqB,SAAJ;AACA,UAAIC,WAAW,GAAG,IAAIlC,KAAJ,EAAlB;AACAkC,MAAAA,WAAW,CAACjC,GAAZ,GAAkB,IAAIkC,GAAJ,CAAQ,gBAAR,CAAlB;AACAvB,MAAAA,GAAG,CAACwB,SAAJ,GAAgB,KAAKC,CAArB;AACAzB,MAAAA,GAAG,CAACgB,SAAJ,CAAcM,WAAd,EAA0BI,IAAI,CAACd,CAA/B,EAAkCc,IAAI,CAACb,CAAvC;AACAb,MAAAA,GAAG,CAAC2B,IAAJ;AACA;AAfS,GAAZ,CAtCD,CAwDC;;AACA,MAAIC,IAAI,GAAG;AACVb,IAAAA,IAAI,EAAE,YACN;AACCf,MAAAA,GAAG,CAACqB,SAAJ;AACArB,MAAAA,GAAG,CAAC6B,MAAJ,CAAW,CAAX,EAAc,EAAd;AACA7B,MAAAA,GAAG,CAAC8B,MAAJ,CAAW/B,MAAM,CAACG,KAAlB,EAAyB,EAAzB;AAA8B;;AAC9BF,MAAAA,GAAG,CAAC+B,SAAJ,GAAgB,CAAhB,CAJD,CAMC;;AACA/B,MAAAA,GAAG,CAACgC,WAAJ,GAAkB,SAAlB;AACAhC,MAAAA,GAAG,CAACiC,MAAJ;AACA;AAXS,GAAX,CAzDD,CAuEC;;AACA,WAASC,WAAT,GACA;AACClC,IAAAA,GAAG,CAACwB,SAAJ,GAAgB,OAAhB;AACAxB,IAAAA,GAAG,CAACmC,QAAJ,CAAa,CAAb,EAAe,CAAf,EAAiBpC,MAAM,CAACG,KAAxB,EAA8BH,MAAM,CAACK,MAArC;AAA8C;AAC9C,GA5EF,CA8EC;;;AACA,WAASgC,MAAT,GACA;AACC;AACA;AACAzB,IAAAA,QAAQ,CAACI,IAAT;AACA,GApFF,CAsFC;;;AACA,WAASsB,cAAT,GACA;AACCpB,IAAAA,KAAK,CAACF,IAAN;AACA,GA1FF,CA4FC;;;AACA,MAAIuB,QAAQ,GAAG,EAAf;AACA,MAAIC,MAAM,GAAG,EAAb;AACAC,EAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,UAAUC,CAAV,EACnC;AACCJ,IAAAA,QAAQ,CAACI,CAAC,CAACC,OAAH,CAAR,GAAsB,IAAtB;AACA,GAHD;AAIAH,EAAAA,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiC,UAAUC,CAAV,EACjC;AACC,WAAOJ,QAAQ,CAACI,CAAC,CAACC,OAAH,CAAf;AACAJ,IAAAA,MAAM,CAACG,CAAC,CAACC,OAAH,CAAN,GAAoB,IAApB;AACA,GAJD,EAnGD,CAyGC;;AACA,WAASC,MAAT,CAAgBC,GAAhB,EACA;AACC,QAAGC,aAAa,CAACC,MAAd,GAAuB,CAA1B,EAA4B;AAC3B,UAAIC,GAAG,GAAGF,aAAa,CAACG,GAAd,EAAV;AAEAH,MAAAA,aAAa,GAAG,EAAhB;AACAnC,MAAAA,QAAQ,CAACC,CAAT,GAAaoC,GAAG,IAAEjD,MAAM,CAACG,KAAP,GAAa,EAAf,CAAhB;AAEA;;AACD,QAAGgD,WAAW,CAACH,MAAZ,GAAqB,CAAxB,EAA0B;AACzB,UAAII,IAAI,GAAGD,WAAW,CAACD,GAAZ,EAAX;AACA;;AACD,QAAGtC,QAAQ,CAACC,CAAT,IAAc,CAAd,IAAmB,CAACF,SAAvB,EACA;AACCF,MAAAA,KAAK,IAAE,EAAP;AACA,UAAI4C,MAAM,GAAGtE,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAb;AAEAsE,MAAAA,WAAW;AACX5C,MAAAA,UAAU,GAAC,KAAX;AACAC,MAAAA,SAAS,GAAC,IAAV;AACA;;AAED,QAAGC,QAAQ,CAACC,CAAT,IAAcb,MAAM,CAACG,KAAP,GAAa,EAA3B,IAAiC,CAACO,UAArC,EACA;AACCD,MAAAA,KAAK,IAAE,EAAP;AACA,UAAI4C,MAAM,GAAGtE,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAb;AAEAsE,MAAAA,WAAW;AACX5C,MAAAA,UAAU,GAAC,IAAX;AACAC,MAAAA,SAAS,GAAC,KAAV;AACA,KA7BF,CAiCC;;;AACA,QAAG,MAAM6B,MAAT,EAAgB;AACf5B,MAAAA,QAAQ,CAACE,CAAT,IAAcF,QAAQ,CAACG,KAAT,GAAiB+B,GAA/B;;AACA,UAAGlC,QAAQ,CAACE,CAAT,GAAW,CAAd,EAAgB;AACfF,QAAAA,QAAQ,CAACE,CAAT,GAAa,CAAb;AACA;;AAED,UAAGF,QAAQ,CAACE,CAAT,GAAWd,MAAM,CAACK,MAAP,GAAc,GAA5B,EAAgC;AAC/BO,QAAAA,QAAQ,CAACE,CAAT,GAAad,MAAM,CAACK,MAAP,GAAc,GAA3B;AACA;AACD,KATD,MAUK,IAAG+C,IAAH,EAAQ;AACZxC,MAAAA,QAAQ,CAACE,CAAT,IAAcF,QAAQ,CAACG,KAAT,GAAiB+B,GAA/B;;AACA,UAAGlC,QAAQ,CAACE,CAAT,GAAW,CAAd,EAAgB;AACfF,QAAAA,QAAQ,CAACE,CAAT,GAAa,CAAb;AACA;;AACD,UAAGF,QAAQ,CAACE,CAAT,GAAWd,MAAM,CAACK,MAAP,GAAc,GAA5B,EAAgC;AAAE;AACjCO,QAAAA,QAAQ,CAACE,CAAT,GAAad,MAAM,CAACK,MAAP,GAAc,GAA3B;AACA;AACD;AAED,GAjKF,CAmKC;;;AACA,WAASkD,OAAT,CAAiBT,GAAjB,EACA;AACC,SAAKU,KAAL,IAActC,KAAd,EACA;AACC,UAAIA,KAAK,CAACuC,cAAN,CAAqBD,KAArB,CAAJ,EACA;AACCtC,QAAAA,KAAK,CAACsC,KAAD,CAAL,CAAa1C,CAAb,IAAkBI,KAAK,CAACsC,KAAD,CAAL,CAAazC,KAAb,GAAqB+B,GAAvC;AACA;AACD;;AAED5B,IAAAA,KAAK,CAACJ,CAAN,IAAWI,KAAK,CAACH,KAAN,GAAc+B,GAAzB;AACA,GA/KF,CAiLC;;;AACA,WAASQ,WAAT,GACA;AACCrD,IAAAA,GAAG,CAACwB,SAAJ,GAAgB,OAAhB;AACAxB,IAAAA,GAAG,CAACyD,IAAJ,GAAW,wBAAX;AACAzD,IAAAA,GAAG,CAAC0D,SAAJ,GAAgB,MAAhB;AACA1D,IAAAA,GAAG,CAAC2D,YAAJ,GAAmB,KAAnB;AACA3D,IAAAA,GAAG,CAAC4D,QAAJ,CAAa,YAAYpD,KAAzB,EAAgC,EAAhC,EAAoC,EAApC;AAEAoB,IAAAA,IAAI,CAACb,IAAL;AACA,GA3LF,CA6LC;;;AACA,WAAS8C,MAAT,GACA;AACCvD,IAAAA,SAAS,CAACwD,IAAV,GADD,CAGC;;AACA5B,IAAAA,WAAW,GAJZ,CAMC;;AACAE,IAAAA,MAAM;AACNiB,IAAAA,WAAW,GARZ,CAUC;;AACA,SAAKE,KAAL,IAActC,KAAd,EACA;AACCoB,MAAAA,cAAc;;AAEd,UAAIpB,KAAK,CAACJ,CAAN,GAAUd,MAAM,CAACK,MAArB,EAA6B;AAC7B;AACCa,UAAAA,KAAK,CAACsC,KAAD,CAAL,CAAa1C,CAAb,GAAiB,EAAjB,CADD,CACsB;;AACrBI,UAAAA,KAAK,CAACsC,KAAD,CAAL,CAAa3C,CAAb,GAAiBM,IAAI,CAACC,KAAL,CAAW,IAAI,CAAC,IAAE,GAAF,GAAM,CAAP,IAAUD,IAAI,CAACE,MAAL,EAAzB,CAAjB,CAFD,CAE2D;AAC1D,SAPF,CASC;;;AACA,UAAIH,KAAK,CAACsC,KAAD,CAAL,CAAa3C,CAAb,GAAiBD,QAAQ,CAACC,CAAT,GAAaD,QAAQ,CAACT,KAAvC,IAAgDe,KAAK,CAACsC,KAAD,CAAL,CAAa3C,CAAb,GAAiBK,KAAK,CAACsC,KAAD,CAAL,CAAarD,KAA9B,GAAsCS,QAAQ,CAACC,CAA/F,IAAoGK,KAAK,CAACsC,KAAD,CAAL,CAAa1C,CAAb,GAAiBF,QAAQ,CAACE,CAAT,GAAaF,QAAQ,CAACP,MAA3I,IAAqJa,KAAK,CAACsC,KAAD,CAAL,CAAa1C,CAAb,GAAiBI,KAAK,CAACsC,KAAD,CAAL,CAAanD,MAA9B,GAAuCO,QAAQ,CAACE,CAAzM,EACA;AACCP,QAAAA,SAAS,CAACyD,KAAV;AACAC,QAAAA,aAAa,CAACC,SAAD,CAAb;AACArE,QAAAA,GAAG,CAACC,KAAJ,CAAUC,OAAV,GAAoB,OAApB;AACAF,QAAAA,GAAG,CAACZ,SAAJ,GAAgB,cAAc,OAAd,GAAwB,aAAxB,GAAwCwB,KAAxC,GAAgD,SAAhD,GAA4D,yDAA5D,GACd,+EADF;AAEA1B,QAAAA,QAAQ,CAACC,cAAT,CAAyB,MAAzB,EAAiC0D,gBAAjC,CAAmD,OAAnD,EAA4D9C,IAA5D,EAAkE,KAAlE;AACAY,QAAAA,QAAQ,CAACuD,IAAT;AACA;;AAED,UAAI7C,KAAK,CAACJ,CAAN,GAAUd,MAAM,CAACK,MAArB,EAA6B;AAC7B;AACCa,UAAAA,KAAK,CAACJ,CAAN,GAAU,EAAV,CADD,CACe;;AACdI,UAAAA,KAAK,CAACL,CAAN,GAAUM,IAAI,CAACC,KAAL,CAAW,IAAI,CAAC,IAAE,GAAF,GAAM,CAAP,IAAUD,IAAI,CAACE,MAAL,EAAzB,CAAV,CAFD,CAEoD;AACnD,SAzBF,CA2BC;;;AACA,UAAIH,KAAK,CAACL,CAAN,GAAUD,QAAQ,CAACC,CAAT,GAAaD,QAAQ,CAACT,KAAhC,IAAyCe,KAAK,CAACL,CAAN,GAAUK,KAAK,CAACf,KAAhB,GAAwBS,QAAQ,CAACC,CAA1E,IAA+EK,KAAK,CAACJ,CAAN,GAAUF,QAAQ,CAACE,CAAT,GAAaF,QAAQ,CAACP,MAA/G,IAAyHa,KAAK,CAACJ,CAAN,GAAUI,KAAK,CAACb,MAAhB,GAAyBO,QAAQ,CAACE,CAA/J,EACA;AACCP,QAAAA,SAAS,CAACyD,KAAV;AACAC,QAAAA,aAAa,CAACC,SAAD,CAAb;AACArE,QAAAA,GAAG,CAACC,KAAJ,CAAUC,OAAV,GAAoB,OAApB;AACAF,QAAAA,GAAG,CAACZ,SAAJ,GAAgB,cAAc,OAAd,GAAwB,aAAxB,GAAwCwB,KAAxC,GAAgD,SAAhD,GAA4D,+EAA5D,GACd,+EADF;AAEA1B,QAAAA,QAAQ,CAACC,cAAT,CAAyB,MAAzB,EAAiC0D,gBAAjC,CAAmD,OAAnD,EAA4D9C,IAA5D,EAAkE,KAAlE;AACAY,QAAAA,QAAQ,CAACuD,IAAT;AACA;AACD;AACD,GAlPF,CAoPC;;;AACA,WAASI,GAAT,GACA;AACCtB,IAAAA,MAAM,CAAC,IAAD,CAAN;AACAU,IAAAA,OAAO,CAAC,IAAD,CAAP;AACAO,IAAAA,MAAM;AACN;;AAED,MAAII,SAAS,GAAG1E,WAAW,CAAC2E,GAAD,EAAM,EAAN,CAA3B;AACA,EAED;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA","file":"project_chris.b022f009.js","sourceRoot":"..","sourcesContent":["//display the following message in the \"startGame\" element\r\nvar id = document.getElementById(\"startGame\");\r\nid.innerHTML = \"Welcome to Blank's Project!\" + \"<br/>\" + \"Waiting to detect a person.\";\r\n\r\nconst playerSource = require('./steve.png')\r\nvar playerSprite = new Image();\r\nplayerSprite.src = playerSource;\r\nvar game_started = false; //check if there is already a game started\r\nsetInterval(checkIfPersonDetected, 1000); //Check for a person every second (=1000ms) \r\n\r\nfunction checkIfPersonDetected()\r\n{\r\n\tif(person_detected && !game_started){\r\n\t\tgame_started = true;\r\n\t\tid.innerHTML = \"Welcome to Blank's Project!\" + \"<br/>\" + \"Detected! Don't move, the system is calibrating...\";\r\n\r\n\t\tsetInterval(() => \r\n\t\t{\r\n\t\t\tif(!person_detected){\r\n\t\t\t\tid.innerHTML = \"Welcome to Blank's Project!\" + \"<br/>\" + \"Waiting to detect a person.\";\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(calibrated){\r\n\t\t\t\tid.innerHTML = \"Calibrated! Jummp to start.\";\r\n\t\t\t\t//IF USER JUMPED\r\n\t\t\t\t\tgame()\r\n\t\t\t}\r\n\t\t}, 1000); //Check for a person every second (=1000ms) \r\n\r\n\t}\r\n}\r\n//main function of the game\r\nfunction game()\r\n{\r\n\t//define ID for different elements used to make the game\r\n\tvar id1 = document.getElementById(\"endGame\");\r\n\r\n\tid.style.display = \"none\";\r\n\tid1.style.display = \"none\";\r\n\r\n\t//define canvas and its properties\r\n\tvar canvas = document.getElementById('canvas');\r\n\tvar ctx = canvas.getContext('2d');\r\n\tcanvas.width = screen.width/4;\r\n\tcanvas.height = screen.height-200;\r\n\t// canvas.width = 500; ***\r\n\r\n\t//variable to check if the canvas sides are touched or not\r\n\tvar already_touched = true;\r\n\t\t \r\n\tvar playsound = document.getElementById(\"collide\");\r\n\tvar endsound = document.getElementById(\"end\");\r\n\tvar count = 0;\r\n\tvar touchright = false;\r\n\tvar touchleft = true;\r\n\r\n\t//object definition for user controlled block*****\r\n\tvar mySprite = {\r\n\t\tx: 0,\r\n\t\ty: canvas.height-120,\r\n\t\twidth: 54,\r\n\t\theight: 120,\r\n\t\tspeed: 200,\r\n\r\n\t\tdraw: function(){\r\n\t\t\tctx.drawImage(playerSprite, this.x, this.y, this.width, this.height);\r\n\t\t}\r\n\t};\r\n\t\r\n\t\r\n\t//circle falling object\r\n\tvar anvil = {\r\n\t\t\tx: Math.floor(0 + (canvas.width)*Math.random()),\r\n\t\t\ty: canvas.height,\r\n\t\t\twidth: 20,\r\n\t\t\theight: 20,\r\n\t\t\tspeed: 150,\r\n\t\t\r\n\t\t\tdraw: function()\r\n\t\t\t{\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tvar anvilSprite = new Image();\r\n\t\t\t\tanvilSprite.src = new URL(\"anvilImage.png\");\r\n\t\t\t\tctx.fillStyle = this.c;\r\n\t\t\t\tctx.drawImage(anvilSprite,self.x, self.y);\r\n\t\t\t\tctx.fill();\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\t//Object that draws the white line that separates the score from the rest of the canvas\r\n\tvar line = {\r\n\t\tdraw: function()\r\n\t\t{\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(0, 35);\r\n\t\t\tctx.lineTo(canvas.width, 35); /* *** */\r\n\t\t\tctx.lineWidth = 5;\r\n\r\n\t\t\t// set line color\r\n\t\t\tctx.strokeStyle = '#ff0000';\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\t};\r\n\r\n\t//Function to draw canvas\r\n\tfunction paintCanvas()\r\n\t{\r\n\t\tctx.fillStyle = \"black\";\r\n\t\tctx.fillRect(0,0,canvas.width,canvas.height); /* *** */\r\n\t}\r\n\r\n\t//Function to draw user controlled object*****\r\n\tfunction player()\r\n\t{\r\n\t\t// ctx.fillStyle = mySprite.color;\r\n\t\t// ctx.fillRect(mySprite.x, mySprite.y, mySprite.width, mySprite.height);\r\n\t\tmySprite.draw();\r\n\t}\r\n\t\r\n\t//Function to draw the falling objects\r\n\tfunction fallingObjects()\r\n\t{\r\n\t\tanvil.draw();\r\n\t}\r\n\r\n\t//definition for event listener *****\r\n\tvar keysDown = {};\r\n\tvar keysUp = {};\r\n\twindow.addEventListener('keydown', function (e)\r\n\t{\r\n\t\tkeysDown[e.keyCode] = true;\r\n\t});\r\n\twindow.addEventListener('keyup', function (e)\r\n\t{\r\n\t\tdelete keysDown[e.keyCode];\r\n\t\tkeysUp[e.keyCode] = true;\r\n\t});\r\n\r\n\t//function to recognize the key pressed and update score each time the moving block makes a full trip from side to side\r\n\tfunction update(mod)\r\n\t{\r\n\t\tif(stack_actions.length > 0){\r\n\t\t\tvar pos = stack_actions.pop();\r\n\t\t\t\r\n\t\t\tstack_actions = [];\r\n\t\t\tmySprite.x = pos*(canvas.width-54)\r\n\r\n\t\t}\r\n\t\tif(stack_jumps.length > 0){\r\n\t\t\tvar jump = stack_jumps.pop();\r\n\t\t}\r\n\t\tif(mySprite.x == 0 && !touchleft)\r\n\t\t{\r\n\t\t\tcount+=10;\r\n\t\t\tvar alert1 = document.getElementById(\"score\");\r\n\r\n\t\t\tupdateScore();\r\n\t\t\ttouchright=false;\r\n\t\t\ttouchleft=true;\r\n\t\t}\r\n\r\n\t\tif(mySprite.x == canvas.width-54 && !touchright)\r\n\t\t{\r\n\t\t\tcount+=10;\r\n\t\t\tvar alert1 = document.getElementById(\"score\");\r\n\r\n\t\t\tupdateScore();\r\n\t\t\ttouchright=true;\r\n\t\t\ttouchleft=false;\r\n\t\t}\r\n\r\n\r\n\r\n\t\t// // *****\r\n\t\tif(38 in keysUp){\r\n\t\t\tmySprite.y += mySprite.speed * mod;\r\n\t\t\tif(mySprite.y<0){\r\n\t\t\t\tmySprite.y = 0;\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif(mySprite.y>canvas.height-120){\r\n\t\t\t\tmySprite.y = canvas.height-120;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(jump){\r\n\t\t\tmySprite.y -= mySprite.speed * mod;\r\n\t\t\tif(mySprite.y>0){\r\n\t\t\t\tmySprite.y = 0;\r\n\t\t\t}\r\n\t\t\tif(mySprite.y<canvas.height-190){ // 70 (jump height) + 120 (player height)\r\n\t\t\t\tmySprite.y = canvas.height-190;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t//function to make the falling objects fall vertically\r\n\tfunction update1(mod)\r\n\t{\r\n\t\tfor (index in anvil)\r\n\t\t{\r\n\t\t\tif (anvil.hasOwnProperty(index))\r\n\t\t\t{\r\n\t\t\t\tanvil[index].y += anvil[index].speed * mod;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tanvil.y += anvil.speed * mod;\r\n\t}\r\n\r\n\t//function that updates score each time a full trip is made\r\n\tfunction updateScore()\r\n\t{\r\n\t\tctx.fillStyle = \"white\";\r\n\t\tctx.font = \"16px Arial, sans-serif\";\r\n\t\tctx.textAlign = \"left\";\r\n\t\tctx.textBaseline = \"top\";\r\n\t\tctx.fillText(\"Score: \" + count, 10, 10 );\r\n\t\t\r\n\t\tline.draw();\r\n\t}\r\n\t\t\t \r\n\t//main function to draw the canvas and every element in it\r\n\tfunction render()\r\n\t{\r\n\t\tplaysound.play();\r\n\t\t\t\r\n\t\t//canvas\t\t \r\n\t\tpaintCanvas();\t\r\n\r\n\t\t//moving red object\r\n\t\tplayer();\r\n\t\tupdateScore();\r\n\t\t\t\t\t \r\n\t\t//falling objects\r\n\t\tfor (index in anvil)\r\n\t\t{\r\n\t\t\tfallingObjects();\t\t\t\r\n\t\t\t\t \r\n\t\t\tif (anvil.y > canvas.height) //Repeat the object when it falls out of view***\r\n\t\t\t{ \t\t\t\r\n\t\t\t\tanvil[index].y = 30; //Account for the image size\r\n\t\t\t\tanvil[index].x = Math.floor(0 + (1+420-0)*Math.random()); //Make it appear randomly along the width  \r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//if condition to detect collision for falling rectangle objects\r\n\t\t\tif (anvil[index].x < mySprite.x + mySprite.width && anvil[index].x + anvil[index].width > mySprite.x && anvil[index].y < mySprite.y + mySprite.height && anvil[index].y + anvil[index].height > mySprite.y)\r\n\t\t\t{\r\n\t\t\t\tplaysound.pause();\t\t\r\n\t\t\t\tclearInterval(collision);\t\r\n\t\t\t\tid1.style.display = \"block\";\t\r\n\t\t\t\tid1.innerHTML = \"Game Over\" + \"<br/>\" + \"You scored \" + count + \" points\" + \"<button class = \\\"button2\\\" id=\\\"btn2\\\">Replay</button>\" \r\n\t\t\t\t+ \"<button class = \\\"button3\\\" id=\\\"btn2\\\" onclick=\\\"closeWin()\\\">Close</button>\";\r\n\t\t\t\tdocument.getElementById (\"btn2\").addEventListener (\"click\", game, false); \r\n\t\t\t\tendsound.play();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (anvil.y > canvas.height) //Repeat the object when it falls out of view***\r\n\t\t\t{ \t\t\t\r\n\t\t\t\tanvil.y = 50; //Account for the image size\r\n\t\t\t\tanvil.x = Math.floor(0 + (1+475-0)*Math.random()); //Make it appear randomly along the width  \r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//if condition to detect collision for falling circle object\r\n\t\t\tif (anvil.x < mySprite.x + mySprite.width && anvil.x + anvil.width > mySprite.x && anvil.y < mySprite.y + mySprite.height && anvil.y + anvil.height > mySprite.y)\r\n\t\t\t{\r\n\t\t\t\tplaysound.pause();\t\t\r\n\t\t\t\tclearInterval(collision);\t\r\n\t\t\t\tid1.style.display = \"block\";\t\r\n\t\t\t\tid1.innerHTML = \"Game Over\" + \"<br/>\" + \"You scored \" + count + \" points\" + \"<button class = \\\"button2\\\" id=\\\"btn2\\\" onclick=\\\"refresh()\\\">Replay</button>\" \r\n\t\t\t\t+ \"<button class = \\\"button3\\\" id=\\\"btn2\\\" onclick=\\\"closeWin()\\\">Close</button>\" \t \r\n\t\t\t\tdocument.getElementById (\"btn2\").addEventListener (\"click\", game, false); \r\n\t\t\t\tendsound.play();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//run the game at the given time\r\n\tfunction run()\r\n\t{\r\n\t\tupdate(0.01);\r\n\t\tupdate1(0.01);\r\n\t\trender();\r\n\t}\r\n\r\n\tvar collision = setInterval(run, 10);\r\n}\r\n\r\n// //function to start e new game\r\n// function refresh()\r\n// {\r\n// \twindow.location.reload();\r\n// }\r\n\r\n// //function to end game\r\n// function closeWin()\r\n// {\r\n// \twindow.close();                                            \r\n// }"]}